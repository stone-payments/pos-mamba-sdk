<div class="title">Organização</div>

<ul class="controllers">
  {#each options as org}
    <li class="controller">
      <span class="org">{strings(org)}</span>
      <Radio
        name="orgs"
        checked={current === org}
        on:click="setOrg(org)"
      />
    </li>
  {/each}
</ul>

<script>
  import { Registry } from '../../../index.js';
  import store from '../store.js';

  const Organizations = () => Registry.persistent.get().$System.Organizations;

  export default {
    components: {
      Radio: '@mamba/radio/Radio.html',
    },
    store: () => store,
    helpers: {
      strings(org) {
        if (String(org).toLowerCase() === 'wlpagarme') return 'WL Pagarme';
        return org;
      },
    },
    data() {
      return {
        options: Organizations().options,
        current: Organizations().current,
        enumerator: Organizations().enumerator,
      };
    },
    methods: {
      setOrg(org) {
        Registry.persistent.set((draft) => {
          draft.$System.Organizations.current = org;
        });
        window.location.reload();
      },
    },
  };
</script>

<style>
  .notice {
    display: none;
    margin-top: 10px;
    color: $neutral400;
  }

  .org {
    color: $green500;
    font-weight: 600;
    text-transform: uppercase;
  }

  :global(.section.is-active .notice) {
    display: block;
  }
</style>
