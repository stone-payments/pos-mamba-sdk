<img
  class="{className}"
  src="{_imageSrc}"
  on:error="useFallbackImage()"
  on:load
  alt=""
/>

<script>
  const defaultImagePath = './assets/org';

  export default {
    data() {
      return {
        isFallback: false,
        defImgPath: defaultImagePath,
        fileName: null,
        path:
          (window.Org &&
            window.Org.getOrganizationFolderPath &&
            window.Org.getOrganizationFolderPath(__APP_MANIFEST__.id)) ||
          defaultImagePath,
        className: '',
      };
    },
    computed: {
      _imageSrc({ path, fileName }) {
        return `${path}/${fileName}`;
      },
    },
    methods: {
      useFallbackImage() {
        const { path, defImgPath } = this.get();
        if (path !== defImgPath) {
          this.set({ path: defImgPath });
        }
      },
    },
  };
</script>
