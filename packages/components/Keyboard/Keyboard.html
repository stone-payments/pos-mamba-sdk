<script>
  import Keyboard from './lib/index.js';
  import Api from './api/index.js';
  import './css/Keyboard.css';
  import './css/KeyboardThemeMath.css';
  import './css/KeyboardThemeNumeric.css';
  import './css/KeyboardThemePhone.css';

  let firstLoad = true;
  let keyboard = null;

  export default {
    data() {
      return {
        debug: __DEV__ || __DEBUG_LVL__ >= 3,
        keepVisible: false,
        autoRender: false,
      };
    },
    oncreate() {
      this.root.on('router:change', () => {
        if (firstLoad) return;
        firstLoad = false;
        try {
          if (!(document.activeElement instanceof HTMLInputElement)) {
            Api.virtualKeyboard.reset();
          }
        } catch (_) {
          //
        }
      });

      keyboard = new Keyboard({
        ...this.get(),
      });

      this.on('destroy', () => {
        if (keyboard) {
          keyboard.destroy();
          keyboard = null;
        }
      });
    },
  };
</script>
