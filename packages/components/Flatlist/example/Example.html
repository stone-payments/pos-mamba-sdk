<h5>Default rows</h5>
<FlatList
  data={dataList}
  renderItem={DefaultRow}
  on:itemActive="itemActive(event)"
  on:itemSelected="itemSelected(event)"
  autoShortcuts={true}
  decorator={GetDefaultDecorator}
/>

<!-- To Override default decorator props, you can pass a `decoratorOverrides` object  -->
<!--
  <FlatList
    ...
    decorator={GetDefaultDecorator}
    decoratorOverrides={{
      prefix: null
    }}
  />
-->

<!-- or override by model -->
<!--
  <FlatList
    ...
    decorator={GetDefaultDecorator}
    decoratorOverrides={{
      S920: {
        prefix: null
      }
    }}
  />
-->


<h5>Custom</h5>
<FlatList
  dataSection={sectionList}
  renderItem={Line}
  on:itemActive="itemActive(event)"
  on:itemSelected="itemSelected(event)"
/>


<script>
import { DefaultRow, FlatList, GetDefaultDecorator } from '@mamba/flatlist/index.js';
import * as Colors from '@mamba/styles/colors.js';
import Line from './Line.html';

export default {
  components: {
    FlatList,
  },
  helpers: {
    DefaultRow,
    GetDefaultDecorator,
    Line,
  },
  data() {
    return {
      sectionList: [],
      dataList: [],
    };
  },
  oncreate() {
    const sectionList = this.getSectionList();
    const dataList = this.getData();

    this.set({
      sectionList,
      dataList,
    });

  },
  methods: {
    getData() {
      const data = [
        {
          label: {
            value: 'Histórico de antecipações',
          },
        },
        {
          onSelected: this.itemClickHandler,
          label: {
            value: 'Parcelado com juros',
            description: 'Comprador assume as taxas do parcelamento',
            style: {
              color: Colors.purple700,
            },
          },
        },
      ];
      return data;
    },
    getSectionList() {
      const section = [
        {
          title: 'Items',
          data: [
            {
              label: {
                value: 'Item 1',
              },
              shortcut: 1,
              onSelected: (item) => {
                /*
                * In this case, this anonymous function can call this script methods
                */
                this.itemClickHandler(item);
              },
            },
            {
              label: {
                value: 'Item 2',
              },
              shortcut: 2,
              /*
              * Executing a method on `onSelect`, will call the desired
              * function when the list is mounted, making it possible to return a dynamic function.
              */
              onSelected: this.itemClickHandler(),
            },
            {
              label: {
                value: 'Item 3',
              },
              shortcut: 3,
              /*
              * Just referencing a function, The `this` will be of this script, but the `this` inside function scope, will be this object reference.
              * To refer methods of this script inside the function reference, use bind:
              * Eg.: this.itemClickHandler.bind(this)
              *
              * itemClickHandler() {
              *   // Without bind
              *   console.log(this) // { label: 'Disk 3', shortcut: 3, itemClickHandler: function... }
              *   // With bind
              *   this.anotherMethod();
              * }
              */
              onSelected: this.itemClickHandler.bind(this),
            },
          ],
        },
        {
          title: 'Devices',
          data: [
            {
              label: {
                value: 'Device 1',
              },
              shortcut: 1,
            },
            {
              label: {
                value: 'Device 2',
              },
              shortcut: 2,
              onSelected: () => this.itemClickHandler(),
            },
          ],
        },
      ];
      return section;
    },
    itemClickHandler({ index, sectionIndex, position, data } = {}) {
      console.log(`Row ${sectionIndex}-${index},`, `position: ${position}`, data);
    },
    itemSelected({ index, sectionIndex, position, data }) {
      console.log(`itemSelected ${sectionIndex}-${index},`, `position: ${position}`, data);
    },
    itemActive({ index, sectionIndex, position, data }) {
      console.log(`itemActive ${sectionIndex}-${index},`, `position: ${position}`, data);
    },
  },
};
</script>
