{#if sectionList.length > 0}
<Flatlist
  dataSection={sectionList}
  renderItem={Line}
  on:itemActive="itemActive(event)"
  on:itemSelected="itemSelected(event)"
  itemHandler={this}
/>
{/if}

<script>
import Line from './Line.html';

export default {
  components: {
    Flatlist: '@mamba/flatlist',
  },
  helpers: {
    Line,
  },
  data() {
    return {
      sectionList: [],
    };
  },
  oncreate() {
    const sectionList = this.getSectionList();

    this.set({
      sectionList,
    });

  },
  methods: {
    getSectionList() {
      const section = [
        {
          title: 'Dispositivo',
          data: [
            {
              label: 'Item 1',
              shortcut: 1,
              onSelected: (index) => {
                /*
                * Using `itemHandler` Flatlist property, so you can call methods of a desired class or object directly
                * In this case we use the methods os this page
                */
                this.itemClickHandler(index);
              },
            },
            {
              label: 'Item 2',
              shortcut: 2,
              /*
              * Wrong! Using `this` without a function wrapper or referencing doesn't work,
              * unless the method returns another function
              */
              onSelected: this.itemClickHandler(),
            },
            {
              label: 'Item 3',
              shortcut: 3,
              /*
              * Just referencing a function, `itemHandler` will have effect. The `this` will be this script
              */
              onSelected: this.itemClickHandler,
            },
            {
              label: 'Item 4',
              shortcut: 4,
            },
          ],
        },
      ];
      return section;
    },
    itemClickHandler({ index, data } = {}) {
      console.log(`Row ${index}`, data);
    },
    itemSelected({ index, data }) {
      console.log(`itemSelected ${index}`, data);
    },
    itemActive({ index, data }) {
      console.log(`itemActive ${index}`, data);
    },
  },
};
</script>
